<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=yes">
  <title>VM Baseada em Evid√™ncias ATS/ERS</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
      background: linear-gradient(145deg, #0a3147 0%, #1a4e7a 50%, #2c6185 100%);
      min-height: 100vh;
      padding: 12px;
      margin: 0;
      display: flex;
      align-items: flex-start;
      justify-content: center;
    }

    .container {
      width: 100%;
      max-width: 480px;
      background: rgba(255, 255, 255, 0.98);
      border-radius: 24px;
      padding: 20px 16px;
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.25);
      backdrop-filter: blur(10px);
      margin: 0 auto;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    h1 {
      font-size: 1.6rem;
      text-align: center;
      color: #0a3147;
      margin-bottom: 16px;
      line-height: 1.3;
      font-weight: 700;
      padding: 0 4px;
      word-break: break-word;
      border-bottom: 3px solid #3498db;
      padding-bottom: 12px;
    }

    .badge-ats {
      background: #2c3e50;
      color: white;
      font-size: 0.7rem;
      padding: 4px 8px;
      border-radius: 20px;
      display: inline-block;
      margin-left: 8px;
      vertical-align: middle;
      font-weight: normal;
    }

    h2 {
      font-size: 1.3rem;
      color: #1a4e7a;
      margin-bottom: 16px;
      font-weight: 600;
      border-left: 5px solid #3498db;
      padding-left: 12px;
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 6px;
    }

    .section {
      background: #f8fafc;
      border-radius: 20px;
      padding: 18px 16px;
      margin-bottom: 24px;
      border: 1px solid rgba(52, 152, 219, 0.3);
      box-shadow: 0 2px 8px rgba(0,0,0,0.03);
    }

    .info-box {
      background: #e1f0fa;
      border-left: 5px solid #2980b9;
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 16px;
      font-size: 0.9rem;
      color: #1a4e7a;
    }

    .info-box strong {
      color: #0a3147;
      display: block;
      margin-bottom: 6px;
      font-size: 1rem;
    }

    label {
      display: block;
      font-size: 0.9rem;
      font-weight: 600;
      color: #2c3e50;
      margin-top: 16px;
      margin-bottom: 4px;
      letter-spacing: -0.2px;
    }

    .label-small {
      font-size: 0.8rem;
      color: #7f8c8d;
      font-weight: normal;
      margin-top: 4px;
    }

    input[type="number"],
    input[type="text"] {
      width: 100%;
      padding: 14px 16px;
      font-size: 16px;
      border: 1.5px solid #dde7f0;
      border-radius: 14px;
      background: white;
      transition: all 0.2s;
      -webkit-appearance: none;
      appearance: none;
    }

    input:focus {
      outline: none;
      border-color: #2980b9;
      box-shadow: 0 0 0 3px rgba(41, 128, 185, 0.1);
    }

    input:invalid {
      border-color: #e74c3c;
    }

    .input-group {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .input-group input {
      flex: 1;
    }

    .input-group select {
      width: 120px;
      padding: 14px;
      border: 1.5px solid #dde7f0;
      border-radius: 14px;
      background: white;
      font-size: 16px;
    }

    .checkbox-container {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-top: 20px;
      padding: 8px 0;
    }

    .checkbox-container input[type="checkbox"] {
      width: 22px;
      height: 22px;
      margin: 0;
      accent-color: #2980b9;
      flex-shrink: 0;
    }

    .checkbox-container label {
      margin: 0;
      font-size: 1rem;
      color: #2c3e50;
    }

    button {
      width: 100%;
      background: linear-gradient(145deg, #2980b9, #1f6692);
      color: white;
      padding: 16px 20px;
      border: none;
      border-radius: 16px;
      font-size: 1.1rem;
      font-weight: 600;
      margin-top: 24px;
      cursor: pointer;
      transition: all 0.2s;
      box-shadow: 0 4px 12px rgba(41, 128, 185, 0.4);
      -webkit-tap-highlight-color: transparent;
      border: 1px solid rgba(255,255,255,0.2);
    }

    button:active {
      transform: scale(0.98);
      background: linear-gradient(145deg, #1f6692, #1a4e7a);
    }

    button.secondary {
      background: linear-gradient(145deg, #7f8c8d, #5f6b6c);
      margin-top: 12px;
    }

    .resultado {
      background: white;
      border: 1px solid #e1e8ed;
      border-radius: 18px;
      padding: 18px;
      margin-top: 20px;
      font-size: 0.95rem;
      line-height: 1.6;
      color: #2c3e50;
      white-space: pre-line;
      max-height: 350px;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.02);
    }

    .alerta {
      color: #c0392b;
      font-weight: 600;
      font-size: 0.9rem;
      margin-top: 12px;
      padding: 12px;
      background: #fae2e0;
      border-radius: 12px;
      border-left: 4px solid #e74c3c;
    }

    .recomendacao {
      color: #27ae60;
      font-weight: 600;
      font-size: 0.9rem;
      margin-top: 12px;
      padding: 12px;
      background: #e0f2e0;
      border-radius: 12px;
      border-left: 4px solid #27ae60;
    }

    .aviso-importante {
      background: #fff3cd;
      border-left: 5px solid #ffc107;
      padding: 12px;
      border-radius: 12px;
      margin: 16px 0 8px;
      font-size: 0.9rem;
      color: #856404;
    }

    .aviso-importante strong {
      display: block;
      margin-bottom: 6px;
      color: #533f03;
    }

    .referencia {
      font-size: 0.75rem;
      color: #7f8c8d;
      text-align: center;
      margin-top: 16px;
      padding-top: 12px;
      border-top: 1px dashed #ccc;
    }

    .referencia a {
      color: #2980b9;
      text-decoration: none;
    }

    @media (max-width: 360px) {
      .container {
        padding: 16px 12px;
      }
      
      h1 {
        font-size: 1.4rem;
      }
      
      .input-group {
        flex-direction: column;
        gap: 8px;
      }
      
      .input-group select {
        width: 100%;
      }
    }

    input[type=number]::-webkit-inner-spin-button, 
    input[type=number]::-webkit-outer-spin-button { 
      -webkit-appearance: none;
      margin: 0;
    }
    
    input[type=number] {
      -moz-appearance: textfield;
    }

    button, .checkbox-container, input {
      touch-action: manipulation;
    }

    .resultado::-webkit-scrollbar {
      width: 6px;
    }
    
    .resultado::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }
    
    .resultado::-webkit-scrollbar-thumb {
      background: #2980b9;
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Interpreta√ß√£o Gasometria e VM <span class="badge-ats">ATS/ERS 2024</span></h1>
    
    <!-- Se√ß√£o de Peso Ideal (ATEN√á√ÉO ESPECIAL) -->
    <div class="section">
      <h2>‚öñÔ∏è Dados do Paciente</h2>
      
      <div class="aviso-importante">
        <strong>‚ö†Ô∏è ATEN√á√ÉO FISIOTERAPEUTA:</strong>
        O c√°lculo do Volume Corrente ideal deve ser baseado no <strong>PESO PREDITO</strong>, n√£o no peso real do paciente. 
        Utilize a f√≥rmula: <br>‚Ä¢ Homens: 50 + 0.91 √ó (altura cm - 152.4)<br>‚Ä¢ Mulheres: 45.5 + 0.91 √ó (altura cm - 152.4)
      </div>
      
      <label>Altura (cm) <span style="font-weight: normal; color: #666;">- obrigat√≥rio para VT ideal</span></label>
      <input type="number" step="1" id="altura" placeholder="Ex: 170" inputmode="numeric">
      
      <div class="input-group">
        <div style="flex: 1;">
          <label>Peso Predito (calculado)</label>
          <input type="number" step="0.1" id="pesoPredito" placeholder="Ser√° calculado" readonly style="background: #f0f7fc;">
        </div>
        <div style="width: 120px;">
          <label>Sexo</label>
          <select id="sexo">
            <option value="">Selecione</option>
            <option value="masculino">Masculino</option>
            <option value="feminino">Feminino</option>
          </select>
        </div>
      </div>
      
      <button class="secondary" onclick="calcularPesoPredito()" style="margin-top: 16px;">üìê Calcular Peso Predito</button>
    </div>
    
    <!-- Se√ß√£o de Gasometria -->
    <div class="section">
      <h2>üìä Gasometria <span class="badge-ats">ATS</span></h2>
      
      <div class="info-box">
        <strong>üìã Valores de Refer√™ncia (ATS/ERS):</strong>
        pH: 7.35-7.45 | pCO‚ÇÇ: 35-45 mmHg | HCO‚ÇÉ‚Åª: 22-26 mmol/L | pO‚ÇÇ: 80-100 mmHg | BE: -2 a +2
      </div>
      
      <label>pH</label>
      <input type="number" step="0.01" id="ph" placeholder="Ex: 7.40" inputmode="decimal">
      
      <label>pCO‚ÇÇ (mmHg)</label>
      <input type="number" step="0.1" id="pco2" placeholder="Ex: 40" inputmode="decimal">
      
      <label>HCO‚ÇÉ‚Åª (mmol/L)</label>
      <input type="number" step="0.1" id="hco3" placeholder="Ex: 24" inputmode="decimal">
      
      <label>pO‚ÇÇ (mmHg) <span style="font-weight: normal; color: #666;">(opcional)</span></label>
      <input type="number" step="0.1" id="po2" placeholder="Ex: 90" inputmode="decimal">
      
      <label>BE <span style="font-weight: normal; color: #666;">(opcional)</span></label>
      <input type="number" step="0.1" id="be" placeholder="Ex: -2" inputmode="decimal">
      
      <button onclick="interpretarGasometria()">üìà Interpretar Gasometria (ATS/ERS)</button>
      
      <div class="resultado" id="resultadoGasometria"></div>
    </div>
    
    <!-- Se√ß√£o de Ventila√ß√£o Mec√¢nica -->
    <div class="section">
      <h2>üí® Ventila√ß√£o Mec√¢nica <span class="badge-ats">ATS/ESICM</span></h2>
      
      <div class="info-box">
        <strong>üî¨ Diretrizes ATS/ESICM 2024:</strong>
        ‚Ä¢ VT: 4-8 mL/kg peso predito (alvo 6 mL/kg)<br>
        ‚Ä¢ Press√£o Plat√¥: < 30 cmH‚ÇÇO (forte recomenda√ß√£o)<br>
        ‚Ä¢ Driving Pressure: < 15 cmH‚ÇÇO (se poss√≠vel)<br>
        ‚Ä¢ Posi√ß√£o Prona: se PaO‚ÇÇ/FiO‚ÇÇ < 150<br>
        ‚Ä¢ Contra recrutamento prolongado (>35 cmH‚ÇÇO por ‚â•1 min)
      </div>
      
      <label>Volume Corrente (mL)</label>
      <input type="number" step="1" id="vt" placeholder="Ex: 450" inputmode="numeric">
      <div class="label-small" id="vtIdealDisplay"></div>
      
      <label>Frequ√™ncia Respirat√≥ria (bpm)</label>
      <input type="number" step="1" id="fr" placeholder="Ex: 16" inputmode="numeric">
      
      <label>Tempo Inspirat√≥rio (s)</label>
      <input type="number" step="0.1" id="ti" placeholder="Ex: 1.0" inputmode="decimal">
      
      <label>Press√£o de Pico (cmH‚ÇÇO)</label>
      <input type="number" step="1" id="pico" placeholder="Ex: 30" inputmode="numeric">
      
      <label>Press√£o Plat√¥ (cmH‚ÇÇO) <span style="font-weight: normal; color: #666;">(recomendado ATS)</span></label>
      <input type="number" step="1" id="pplat" placeholder="Ex: 25" inputmode="numeric">
      
      <label>PEEP (cmH‚ÇÇO) <span style="font-weight: normal; color: #666;">(opcional)</span></label>
      <input type="number" step="1" id="peep" placeholder="Ex: 8" inputmode="numeric">
      
      <label>PaO‚ÇÇ/FiO‚ÇÇ <span style="font-weight: normal; color: #666;">(opcional)</span></label>
      <input type="number" step="1" id="pf" placeholder="Ex: 200" inputmode="numeric">
      
      <div class="checkbox-container">
        <input type="checkbox" id="obstrutivo">
        <label for="obstrutivo">ü´Å Paciente com dist√∫rbio obstrutivo (DPOC/Asma)</label>
      </div>
      
      <div class="checkbox-container">
        <input type="checkbox" id="ards">
        <label for="ards">ü´Å SDRA (S√≠ndrome do Desconforto Respirat√≥rio Agudo)</label>
      </div>
      
      <button onclick="interpretarVentilacao()">‚úÖ Analisar conforme ATS/ERS</button>
      
      <div class="resultado" id="resultadoVentilacao"></div>
    </div>
    
    <div class="referencia">
      Baseado nas diretrizes <strong>ATS/ERS/ESICM 2023-2024</strong> e declara√ß√µes conjuntas. Recomenda√ß√µes para ventila√ß√£o protetora e manejo de SDRA.
    </div>
  </div>
  
  <script>
    // Calcula o peso predito baseado na altura e sexo
    function calcularPesoPredito() {
      const altura = parseFloat(document.getElementById('altura').value);
      const sexo = document.getElementById('sexo').value;
      
      if (isNaN(altura) || altura < 100 || altura > 250) {
        alert("Por favor, digite uma altura v√°lida (100-250 cm)");
        return;
      }
      
      if (!sexo) {
        alert("Selecione o sexo do paciente");
        return;
      }
      
      let pesoPredito;
      if (sexo === 'masculino') {
        pesoPredito = 50 + 0.91 * (altura - 152.4);
      } else {
        pesoPredito = 45.5 + 0.91 * (altura - 152.4);
      }
      
      pesoPredito = Math.round(pesoPredito * 10) / 10;
      document.getElementById('pesoPredito').value = pesoPredito;
      
      // Atualiza a faixa de VT ideal
      const vtMin = Math.round(pesoPredito * 4);
      const vtAlvo = Math.round(pesoPredito * 6);
      const vtMax = Math.round(pesoPredito * 8);
      
      document.getElementById('vtIdealDisplay').innerHTML = 
        `‚úÖ VT ideal para este paciente: ${vtMin}-${vtMax} mL (alvo: ${vtAlvo} mL) ¬∑ 4-8 mL/kg`;
      
      return pesoPredito;
    }
    
    function validarGasometria(ph, pco2, hco3) {
      let erros = [];
      if (isNaN(ph)) erros.push("‚ö†Ô∏è pH √© obrigat√≥rio.");
      if (isNaN(pco2)) erros.push("‚ö†Ô∏è pCO‚ÇÇ √© obrigat√≥rio.");
      if (isNaN(hco3)) erros.push("‚ö†Ô∏è HCO‚ÇÉ‚Åª √© obrigat√≥rio.");
      return erros;
    }
    
    function interpretarGasometria() {
      const ph = parseFloat(document.getElementById('ph').value);
      const pco2 = parseFloat(document.getElementById('pco2').value);
      const hco3 = parseFloat(document.getElementById('hco3').value);
      const po2 = parseFloat(document.getElementById('po2').value);
      const be = parseFloat(document.getElementById('be').value);
      
      let erros = validarGasometria(ph, pco2, hco3);
      if (erros.length) {
        document.getElementById('resultadoGasometria').innerHTML = erros.join("<br>");
        return;
      }
      
      let alerta = [];
      if (ph < 7.35 || ph > 7.45) alerta.push(`pH: ${ph} (VR: 7.35-7.45)`);
      if (pco2 < 35 || pco2 > 45) alerta.push(`pCO‚ÇÇ: ${pco2} mmHg (VR: 35-45)`);
      if (hco3 < 22 || hco3 > 26) alerta.push(`HCO‚ÇÉ‚Åª: ${hco3} mmol/L (VR: 22-26)`);
      if (!isNaN(po2) && (po2 < 80 || po2 > 100)) alerta.push(`pO‚ÇÇ: ${po2} mmHg (VR: 80-100)`);
      if (!isNaN(be) && (be < -2 || be > 2)) alerta.push(`BE: ${be} (VR: -2 a +2)`);
      
      let interpretacao = "";
      if (ph < 7.35) {
        interpretacao = "üî¥ <strong>ACIDOSE</strong><br>";
        if (pco2 > 45 && hco3 < 22) {
          interpretacao += "‚Ä¢ Acidose mista (respirat√≥ria + metab√≥lica)";
        } else if (pco2 > 45) {
          interpretacao += "‚Ä¢ Acidose respirat√≥ria (pCO‚ÇÇ ‚Üë)";
        } else if (hco3 < 22) {
          interpretacao += "‚Ä¢ Acidose metab√≥lica (HCO‚ÇÉ‚Åª ‚Üì)";
        } else {
          interpretacao += "‚Ä¢ Padr√£o n√£o definido - avaliar compensa√ß√£o";
        }
      } else if (ph > 7.45) {
        interpretacao = "üîµ <strong>ALCALOSE</strong><br>";
        if (pco2 < 35 && hco3 > 26) {
          interpretacao += "‚Ä¢ Alcalose mista (respirat√≥ria + metab√≥lica)";
        } else if (pco2 < 35) {
          interpretacao += "‚Ä¢ Alcalose respirat√≥ria (pCO‚ÇÇ ‚Üì)";
        } else if (hco3 > 26) {
          interpretacao += "‚Ä¢ Alcalose metab√≥lica (HCO‚ÇÉ‚Åª ‚Üë)";
        } else {
          interpretacao += "‚Ä¢ Padr√£o n√£o definido - avaliar compensa√ß√£o";
        }
      } else {
        interpretacao = "üü¢ <strong>pH NORMAL</strong><br>";
        if (pco2 > 45 && hco3 > 26) {
          interpretacao += "‚Ä¢ Dist√∫rbio misto: Acidose respirat√≥ria + Alcalose metab√≥lica (pH compensado)";
        } else if (pco2 < 35 && hco3 < 22) {
          interpretacao += "‚Ä¢ Dist√∫rbio misto: Alcalose respirat√≥ria + Acidose metab√≥lica (pH compensado)";
        } else {
          interpretacao += "‚Ä¢ Gasometria dentro dos par√¢metros de normalidade";
        }
      }
      
      let resultado = `<strong>üìã Interpreta√ß√£o ATS/ERS:</strong><br>${interpretacao}`;
      
      if (alerta.length > 0) {
        resultado += `<br><br><strong>‚ö†Ô∏è Valores fora da refer√™ncia:</strong><br>`;
        resultado += alerta.join("<br>");
      }
      
      // Recomenda√ß√£o baseada em evid√™ncias
      if (ph < 7.35 && pco2 > 45) {
        resultado += `<br><br><strong>üí° Conduta baseada em evid√™ncias:</strong><br>`;
        resultado += `‚Ä¢ Avaliar causa: seda√ß√£o excessiva, fadiga muscular, obstru√ß√£o de vias a√©reas<br>`;
        resultado += `‚Ä¢ Antes de ajustar FR: verifique auto-PEEP e driving pressure<br>`;
        resultado += `‚Ä¢ Considere aumentar FR se auto-PEEP < 10 cmH‚ÇÇO e Pplat < 30`;
      }
      
      if (!isNaN(po2) && po2 < 60) {
        resultado += `<br><br><strong>‚ö†Ô∏è Hipoxemia grave:</strong> Considere otimizar PEEP, posi√ß√£o prona se SDRA e PaO‚ÇÇ/FiO‚ÇÇ < 150 (recomenda√ß√£o ATS forte)`;
      }
      
      document.getElementById('resultadoGasometria').innerHTML = resultado;
    }
    
    function interpretarVentilacao() {
      const vt = parseFloat(document.getElementById('vt').value);
      const fr = parseFloat(document.getElementById('fr').value);
      const ti = parseFloat(document.getElementById('ti').value);
      const pico = parseFloat(document.getElementById('pico').value);
      const pplat = parseFloat(document.getElementById('pplat').value);
      const peep = parseFloat(document.getElementById('peep').value);
      const pf = parseFloat(document.getElementById('pf').value);
      const obstrutivo = document.getElementById('obstrutivo').checked;
      const ards = document.getElementById('ards').checked;
      
      const pesoPredito = parseFloat(document.getElementById('pesoPredito').value);
      
      const ph = parseFloat(document.getElementById('ph').value);
      const pco2 = parseFloat(document.getElementById('pco2').value);
      
      if (isNaN(vt) || isNaN(fr) || isNaN(ti) || isNaN(pico)) {
        document.getElementById('resultadoVentilacao').innerHTML = "‚ö†Ô∏è Preencha todos os dados de ventila√ß√£o obrigat√≥rios.";
        return;
      }
      
      let resultado = "<strong>üí® An√°lise conforme Diretrizes ATS/ERS/ESICM 2024:</strong><br><br>";
      
      // C√°lculo do driving pressure se Pplat e PEEP dispon√≠veis
      if (!isNaN(pplat) && !isNaN(peep)) {
        const driving = pplat - peep;
        resultado += `üìä <strong>Driving Pressure:</strong> ${driving} cmH‚ÇÇO (recomendado < 15) - `;
        if (driving < 15) {
          resultado += "‚úÖ Adequado<br>";
        } else {
          resultado += "‚ö†Ô∏è Elevado - associado a pior progn√≥stico em SDRA<br>";
        }
      }
      
      // An√°lise do VT baseado em peso predito
      if (!isNaN(pesoPredito) && pesoPredito > 0) {
        const vtPorKg = vt / pesoPredito;
        resultado += `<br>üìè <strong>Volume Corrente:</strong> ${vt} mL (${vtPorKg.toFixed(1)} mL/kg) - `;
        
        if (vtPorKg < 4) {
          resultado += "‚ö†Ô∏è <strong>ABAIXO</strong> da recomenda√ß√£o 4-8 mL/kg (risco de hipoventila√ß√£o/atelectasia)<br>";
        } else if (vtPorKg >= 4 && vtPorKg <= 6) {
          resultado += "‚úÖ <strong>√ìTIMO</strong> - Faixa ideal de prote√ß√£o pulmonar (alvo 6 mL/kg)<br>";
        } else if (vtPorKg > 6 && vtPorKg <= 8) {
          resultado += "üü° <strong>ACEIT√ÅVEL</strong> - Dentro da faixa recomendada, mas prefira 6 mL/kg em SDRA<br>";
        } else {
          resultado += "üî¥ <strong>ACIMA</strong> da recomenda√ß√£o (>8 mL/kg) - risco de volutrauma. Reduza para 6 mL/kg!<br>";
        }
      } else {
        resultado += `<br>üìè <strong>Volume Corrente:</strong> ${vt} mL - `;
        if (vt < 300) resultado += "Muito baixo para paciente m√©dio (calcule peso predito)<br>";
        else if (vt > 700) resultado += "Elevado para maioria dos pacientes (risco de volutrauma)<br>";
        else resultado += "Valor intermedi√°rio - calcule peso predito para avalia√ß√£o precisa<br>";
      }
      
      // Press√£o Plat√¥ (recomenda√ß√£o forte ATS)
      if (!isNaN(pplat)) {
        resultado += `<br>üìä <strong>Press√£o Plat√¥:</strong> ${pplat} cmH‚ÇÇO - `;
        if (pplat < 30) {
          resultado += "‚úÖ Adequada (recomenda√ß√£o ATS/ESICM)<br>";
        } else {
          resultado += "üî¥ <strong>ELEVADA</strong> (>30) - risco de barotrauma. Reduza VT ou ajuste PEEP!<br>";
        }
      }
      
      // Press√£o de Pico
      resultado += `<br>üìä <strong>Press√£o de Pico:</strong> ${pico} cmH‚ÇÇO - `;
      if (pico < 30) resultado += "Adequada<br>";
      else if (pico <= 40) resultado += "Lim√≠trofe - monitore Pplat<br>";
      else resultado += "Elevada - avalie resist√™ncia de vias a√©reas e Pplat<br>";
      
      // FR e auto-PEEP
      resultado += `<br>üìä <strong>Frequ√™ncia Respirat√≥ria:</strong> ${fr} bpm - `;
      if (fr < 12) resultado += "Baixa - risco de hipercapnia se VT baixo<br>";
      else if (fr <= 25) resultado += "Faixa usual<br>";
      else resultado += "Elevada - risco de auto-PEEP. Avalie tempo expirat√≥rio<br>";
      
      // Tempo inspirat√≥rio
      resultado += `<br>üìä <strong>Tempo Inspirat√≥rio:</strong> ${ti}s - `;
      const relacaoIE = ti / (60/fr - ti);
      if (ti < 0.8) resultado += "Curto - pode comprometer distribui√ß√£o do VT<br>";
      else if (ti <= 1.3) resultado += "Adequado<br>";
      else resultado += "Prolongado - reduza para aumentar tempo expirat√≥rio<br>";
      
      // PaO2/FiO2 e posi√ß√£o prona
      if (!isNaN(pf)) {
        resultado += `<br>üìä <strong>PaO‚ÇÇ/FiO‚ÇÇ:</strong> ${pf} - `;
        if (pf < 150 && ards) {
          resultado += "<br>üîµ <strong>RECOMENDA√á√ÉO FORTE ATS/ERS:</strong> Posi√ß√£o prona por >12-16h/dia em SDRA moderada a grave (PaO‚ÇÇ/FiO‚ÇÇ < 150)<br>";
        } else if (pf < 200) {
          resultado += "Hipoxemia moderada - otimize PEEP e considere recrutamento cuidadoso<br>";
        }
      }
      
      // Condutas espec√≠ficas baseadas em diretrizes
      resultado += "<br><strong>üè• CONDUTAS BASEADAS EM EVID√äNCIAS ATS/ERS:</strong><br>";
      
      if (ards) {
        resultado += "‚Ä¢ <strong>SDRA confirmada:</strong> Ventila√ß√£o protetora com VT 6 mL/kg (4-8), Pplat <30, driving pressure <15<br>";
        resultado += "‚Ä¢ <strong>PEEP:</strong> Tabela PEEP/FiO‚ÇÇ ou titration baseado em complac√™ncia<br>";
        resultado += "‚Ä¢ <strong>Manobras de recrutamento:</strong> EVITAR manobras prolongadas (>35 cmH‚ÇÇO por ‚â•1 min) - contraindicado pela ATS/ESICM 2024<br>";
        resultado += "‚Ä¢ <strong>Bloqueador neuromuscular:</strong> Considerar se assincronia persistente (recomenda√ß√£o condicional)<br>";
      }
      
      if (obstrutivo) {
        resultado += "‚Ä¢ <strong>Doen√ßa obstrutiva:</strong> Monitorar auto-PEEP (alvo <10 cmH‚ÇÇO). PEEP externa = 50-85% da auto-PEEP<br>";
        resultado += "‚Ä¢ <strong>Tempo expirat√≥rio:</strong> Aumente (reduza FR ou TI) para melhorar esvaziamento alveolar<br>";
        resultado += "‚Ä¢ <strong>VNI:</strong> Primeira linha na exacerba√ß√£o DPOC (recomenda√ß√£o forte ATS/ERS)<br>";
      }
      
      // Integra√ß√£o com gasometria - abordagem mais sofisticada
      if (!isNaN(ph) && !isNaN(pco2)) {
        resultado += "<br><strong>üîÑ INTEGRA√á√ÉO GASOMETRIA-VENTILA√á√ÉO:</strong><br>";
        
        if (ph < 7.35 && pco2 > 45) {
          resultado += "‚Ä¢ Acidose respirat√≥ria: ANTES de aumentar FR, avalie auto-PEEP e driving pressure. Se auto-PEEP <10 e Pplat <30, aumente FR gradualmente<br>";
        } else if (ph > 7.45 && pco2 < 35) {
          resultado += "‚Ä¢ Alcalose respirat√≥ria: Reduza FR ou aumente espa√ßo morto. Evite hiperventila√ß√£o iatrog√™nica<br>";
        }
      }
      
      document.getElementById('resultadoVentilacao').innerHTML = resultado;
    }
    
    // Atualiza display do VT ideal quando altura/sexo mudam
    document.getElementById('altura').addEventListener('input', function() {
      if (document.getElementById('sexo').value) {
        calcularPesoPredito();
      }
    });
    
    document.getElementById('sexo').addEventListener('change', function() {
      if (document.getElementById('altura').value) {
        calcularPesoPredito();
      }
    });
  </script>
</body>
</html>
